<!DOCTYPE html>
<html>
<head>
    <title>Repository Dependency Graphs</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.25.0/cytoscape.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        .container { width: 90%; margin: 0 auto; padding: 20px; }
        h1, h2, h3 { color: #333; }
        #cy { width: 100%; height: 600px; border: 1px solid #ddd; margin-bottom: 20px; }
        .graph-container { margin-bottom: 30px; }
        .controls { margin: 15px 0; display: flex; flex-wrap: wrap; gap: 10px; }
        .btn { padding: 8px 15px; background: #4CAF50; color: white; border: none; cursor: pointer; border-radius: 4px; }
        .btn:hover { background: #45a049; }
        .subgraph-selector { padding: 8px; border-radius: 4px; border: 1px solid #ddd; }
        .legend { display: flex; margin: 10px 0; }
        .legend-item { display: flex; align-items: center; margin-right: 15px; }
        .legend-color { width: 20px; height: 20px; margin-right: 5px; border-radius: 3px; }
        .info-panel { background: #f5f5f5; padding: 15px; border-radius: 4px; margin-top: 10px; display: none; }
        .file-list { margin-top: 20px; }
        .file-list li { margin-bottom: 5px; }
        #loading { text-align: center; margin-top: 20px; padding: 10px; }
        #status { padding: 10px; margin: 10px 0; border-radius: 4px; display: none; }
        .status-error { background-color: #f8d7da; color: #721c24; }
        .status-success { background-color: #d4edda; color: #155724; }
        .node-details { margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Repository Dependency Graph Analysis</h1>
        
        <div class="graph-container">
            <h2>Interactive Dependency Graph</h2>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #6BAED6;"></div>
                    <span>Python</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #74C476;"></div>
                    <span>JavaScript</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #EF6548;"></div>
                    <span>TypeScript</span>
                </div>
            </div>
            
            <div class="controls">
                <select id="graphSelector" class="subgraph-selector">
                    <option value="main">Main Graph</option>
                </select>
                <button id="fitBtn" class="btn">Fit View</button>
                <button id="randomLayoutBtn" class="btn">Random Layout</button>
                <button id="gridLayoutBtn" class="btn">Grid Layout</button>
                <button id="concLayoutBtn" class="btn">Concentric Layout</button>
                <button id="spreadLayoutBtn" class="btn">Spread Layout</button>
                <button id="coseLayoutBtn" class="btn">COSE Layout (Default)</button>
            </div>
            
            <div id="cy"></div>
            <div id="loading">Loading graph data...</div>
            <div id="status"></div>
            
            <div id="infoPanel" class="info-panel"></div>
            
            <div class="file-list">
                <h3>Files in Current View</h3>
                <ul id="fileList"></ul>
            </div>
        </div>
    </div>

    <script>
    // Main graph data - will be replaced by Python
    var mainGraphData = [{"data": {"id": "firebase-messaging-sw.js", "label": "firebase-messaging-sw.js", "fullPath": "firebase-messaging-sw.js", "type": "javascript"}}, {"data": {"id": "sesion.js", "label": "sesion.js", "fullPath": "sesion.js", "type": "javascript"}}, {"data": {"id": ".eslintrc.js", "label": ".eslintrc.js", "fullPath": ".eslintrc.js", "type": "javascript"}}, {"data": {"id": ".postcssrc.js", "label": ".postcssrc.js", "fullPath": ".postcssrc.js", "type": "javascript"}}, {"data": {"id": "config/workbox.js", "label": "workbox.js", "fullPath": "config/workbox.js", "type": "javascript"}}, {"data": {"id": "config/index.js", "label": "index.js", "fullPath": "config/index.js", "type": "javascript"}}, {"data": {"id": ".firebase/gscript.js", "label": "gscript.js", "fullPath": ".firebase/gscript.js", "type": "javascript"}}, {"data": {"id": "static/js/firebase-messaging-sw.js", "label": "firebase-messaging-sw.js", "fullPath": "static/js/firebase-messaging-sw.js", "type": "javascript"}}, {"data": {"id": "static/js/upload.js", "label": "upload.js", "fullPath": "static/js/upload.js", "type": "javascript"}}, {"data": {"id": "static/js/config.js", "label": "config.js", "fullPath": "static/js/config.js", "type": "javascript"}}, {"data": {"id": "static/js/jquery.onScreenKeyboard.js", "label": "jquery.onScreenKeyboard.js", "fullPath": "static/js/jquery.onScreenKeyboard.js", "type": "javascript"}}, {"data": {"id": "static/js/sw-cache-sync.js", "label": "sw-cache-sync.js", "fullPath": "static/js/sw-cache-sync.js", "type": "javascript"}}, {"data": {"id": "static/js/jquery.onScreenKeynumber.js", "label": "jquery.onScreenKeynumber.js", "fullPath": "static/js/jquery.onScreenKeynumber.js", "type": "javascript"}}, {"data": {"id": "functions/index.js", "label": "index.js", "fullPath": "functions/index.js", "type": "javascript"}}, {"data": {"id": "functions/config.js", "label": "config.js", "fullPath": "functions/config.js", "type": "javascript"}}, {"data": {"id": "functions/.eslintrc.js", "label": ".eslintrc.js", "fullPath": "functions/.eslintrc.js", "type": "javascript"}}, {"data": {"id": "src/main.js", "label": "main.js", "fullPath": "src/main.js", "type": "javascript"}}, {"data": {"id": "src/const/globals.js", "label": "globals.js", "fullPath": "src/const/globals.js", "type": "javascript"}}, {"data": {"id": "src/store/store.js", "label": "store.js", "fullPath": "src/store/store.js", "type": "javascript"}}, {"data": {"id": "src/analytics/analytics.js", "label": "analytics.js", "fullPath": "src/analytics/analytics.js", "type": "javascript"}}, {"data": {"id": "src/store/modules/cart.js", "label": "cart.js", "fullPath": "src/store/modules/cart.js", "type": "javascript"}}, {"data": {"id": "src/mixins/aeropayEvent.js", "label": "aeropayEvent.js", "fullPath": "src/mixins/aeropayEvent.js", "type": "javascript"}}, {"data": {"id": "src/api/messaging/index.js", "label": "index.js", "fullPath": "src/api/messaging/index.js", "type": "javascript"}}, {"data": {"id": "src/mixins/offlineMixin.js", "label": "offlineMixin.js", "fullPath": "src/mixins/offlineMixin.js", "type": "javascript"}}, {"data": {"id": "src/mixins/keyboardEvents.js", "label": "keyboardEvents.js", "fullPath": "src/mixins/keyboardEvents.js", "type": "javascript"}}, {"data": {"id": "src/mixins/redirectEvent.js", "label": "redirectEvent.js", "fullPath": "src/mixins/redirectEvent.js", "type": "javascript"}}, {"data": {"id": "src/mixins/HasProductsPaginated.js", "label": "HasProductsPaginated.js", "fullPath": "src/mixins/HasProductsPaginated.js", "type": "javascript"}}, {"data": {"id": "src/mixins/HasShopify.js", "label": "HasShopify.js", "fullPath": "src/mixins/HasShopify.js", "type": "javascript"}}, {"data": {"id": "src/mixins/isCardWithAttributes.js", "label": "isCardWithAttributes.js", "fullPath": "src/mixins/isCardWithAttributes.js", "type": "javascript"}}, {"data": {"id": "src/mixins/MergeConfig.js", "label": "MergeConfig.js", "fullPath": "src/mixins/MergeConfig.js", "type": "javascript"}}, {"data": {"id": "src/plugins/config.js", "label": "config.js", "fullPath": "src/plugins/config.js", "type": "javascript"}}, {"data": {"id": "src/api/LocalRepo.js", "label": "LocalRepo.js", "fullPath": "src/api/LocalRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/dbconfig.js", "label": "dbconfig.js", "fullPath": "src/api/dbconfig.js", "type": "javascript"}}, {"data": {"id": "src/api/db.js", "label": "db.js", "fullPath": "src/api/db.js", "type": "javascript"}}, {"data": {"id": "src/api/urls.js", "label": "urls.js", "fullPath": "src/api/urls.js", "type": "javascript"}}, {"data": {"id": "src/api/RemoteRepo.js", "label": "RemoteRepo.js", "fullPath": "src/api/RemoteRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/http.js", "label": "http.js", "fullPath": "src/api/http.js", "type": "javascript"}}, {"data": {"id": "src/api/api.js", "label": "api.js", "fullPath": "src/api/api.js", "type": "javascript"}}, {"data": {"id": "src/api/repo.js", "label": "repo.js", "fullPath": "src/api/repo.js", "type": "javascript"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js", "label": "FeatureTagsRepo.js", "fullPath": "src/api/feature-tags/FeatureTagsRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsLocal.js", "label": "FeatureTagsLocal.js", "fullPath": "src/api/feature-tags/FeatureTagsLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRemote.js", "label": "FeatureTagsRemote.js", "fullPath": "src/api/feature-tags/FeatureTagsRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/products/ProductsRepo.js", "label": "ProductsRepo.js", "fullPath": "src/api/products/ProductsRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/products/ProductsLocal.js", "label": "ProductsLocal.js", "fullPath": "src/api/products/ProductsLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/products/ProductsRemote.js", "label": "ProductsRemote.js", "fullPath": "src/api/products/ProductsRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/brands/BrandsRemote.js", "label": "BrandsRemote.js", "fullPath": "src/api/brands/BrandsRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/brands/BrandsLocal.js", "label": "BrandsLocal.js", "fullPath": "src/api/brands/BrandsLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/brands/BrandsRepo.js", "label": "BrandsRepo.js", "fullPath": "src/api/brands/BrandsRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/articles/ArticlesLocal.js", "label": "ArticlesLocal.js", "fullPath": "src/api/articles/ArticlesLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js", "label": "ArticlesRepo.js", "fullPath": "src/api/articles/ArticlesRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/articles/ArticlesRemote.js", "label": "ArticlesRemote.js", "fullPath": "src/api/articles/ArticlesRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/messaging/fb.js", "label": "fb.js", "fullPath": "src/api/messaging/fb.js", "type": "javascript"}}, {"data": {"id": "src/api/categories/CategoriesRemote.js", "label": "CategoriesRemote.js", "fullPath": "src/api/categories/CategoriesRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/categories/CategoriesLocal.js", "label": "CategoriesLocal.js", "fullPath": "src/api/categories/CategoriesLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js", "label": "CategoriesRepo.js", "fullPath": "src/api/categories/CategoriesRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/rfid/RFIDRemote.js", "label": "RFIDRemote.js", "fullPath": "src/api/rfid/RFIDRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js", "label": "RFIDRepo.js", "fullPath": "src/api/rfid/RFIDRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/rfid/RFIDLocal.js", "label": "RFIDLocal.js", "fullPath": "src/api/rfid/RFIDLocal.js", "type": "javascript"}}, {"data": {"id": "src/assets/js/GSDevTools3.min.js", "label": "GSDevTools3.min.js", "fullPath": "src/assets/js/GSDevTools3.min.js", "type": "javascript"}}, {"data": {"id": "src/assets/js/utils.js", "label": "utils.js", "fullPath": "src/assets/js/utils.js", "type": "javascript"}}, {"data": {"id": "src/analytics/events.js", "label": "events.js", "fullPath": "src/analytics/events.js", "type": "javascript"}}, {"data": {"id": "src/analytics/db.js", "label": "db.js", "fullPath": "src/analytics/db.js", "type": "javascript"}}, {"data": {"id": "src/analytics/EventsAPI.js", "label": "EventsAPI.js", "fullPath": "src/analytics/EventsAPI.js", "type": "javascript"}}, {"data": {"id": "src/analytics/example.js", "label": "example.js", "fullPath": "src/analytics/example.js", "type": "javascript"}}, {"data": {"id": "src/store/modules/products.js", "label": "products.js", "fullPath": "src/store/modules/products.js", "type": "javascript"}}, {"data": {"id": "src/router/index.js", "label": "index.js", "fullPath": "src/router/index.js", "type": "javascript"}}, {"data": {"id": "src/main.js-src/const/globals.js", "source": "src/main.js", "target": "src/const/globals.js", "imports": "SETTINGS_TIME"}}, {"data": {"id": "src/main.js-src/store/store.js", "source": "src/main.js", "target": "src/store/store.js", "imports": "default as vuexStore"}}, {"data": {"id": "src/main.js-src/analytics/analytics.js", "source": "src/main.js", "target": "src/analytics/analytics.js", "imports": "default as Analytics"}}, {"data": {"id": "src/main.js-src/store/modules/cart.js", "source": "src/main.js", "target": "src/store/modules/cart.js", "imports": "default as cart"}}, {"data": {"id": "src/store/store.js-src/store/modules/products.js", "source": "src/store/store.js", "target": "src/store/modules/products.js", "imports": "default as products"}}, {"data": {"id": "src/store/store.js-src/store/modules/cart.js", "source": "src/store/store.js", "target": "src/store/modules/cart.js", "imports": "default as cart"}}, {"data": {"id": "src/analytics/analytics.js-src/analytics/events.js", "source": "src/analytics/analytics.js", "target": "src/analytics/events.js", "imports": "default as Events"}}, {"data": {"id": "src/analytics/analytics.js-src/analytics/EventsAPI.js", "source": "src/analytics/analytics.js", "target": "src/analytics/EventsAPI.js", "imports": "default as EventsAPI"}}, {"data": {"id": "src/mixins/aeropayEvent.js-src/const/globals.js", "source": "src/mixins/aeropayEvent.js", "target": "src/const/globals.js", "imports": "fireb as eConfig"}}, {"data": {"id": "src/mixins/aeropayEvent.js-src/api/messaging/index.js", "source": "src/mixins/aeropayEvent.js", "target": "src/api/messaging/index.js", "imports": "getAeropayOrderChanges"}}, {"data": {"id": "src/api/messaging/index.js-src/const/globals.js", "source": "src/api/messaging/index.js", "target": "src/const/globals.js", "imports": "SERVER_KEY, VAPID_KEY"}}, {"data": {"id": "src/api/messaging/index.js-src/api/messaging/fb.js", "source": "src/api/messaging/index.js", "target": "src/api/messaging/fb.js", "imports": "fbMessaging, fireb as eDB"}}, {"data": {"id": "src/plugins/config.js-src/const/globals.js", "source": "src/plugins/config.js", "target": "src/const/globals.js", "imports": "API_ENVIROMENTS"}}, {"data": {"id": "src/api/LocalRepo.js-src/api/dbconfig.js", "source": "src/api/LocalRepo.js", "target": "src/api/dbconfig.js", "imports": "default as DB"}}, {"data": {"id": "src/api/RemoteRepo.js-src/api/http.js", "source": "src/api/RemoteRepo.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/api.js-src/api/urls.js", "source": "src/api/api.js", "target": "src/api/urls.js", "imports": "ORDERS_PREVIEW"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js-src/api/repo.js", "source": "src/api/feature-tags/FeatureTagsRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js-src/api/feature-tags/FeatureTagsLocal.js", "source": "src/api/feature-tags/FeatureTagsRepo.js", "target": "src/api/feature-tags/FeatureTagsLocal.js", "imports": "FeatureTagsLocal"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js-src/api/feature-tags/FeatureTagsRemote.js", "source": "src/api/feature-tags/FeatureTagsRepo.js", "target": "src/api/feature-tags/FeatureTagsRemote.js", "imports": "FeaturesTagsRemote"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsLocal.js-src/api/LocalRepo.js", "source": "src/api/feature-tags/FeatureTagsLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRemote.js-src/api/http.js", "source": "src/api/feature-tags/FeatureTagsRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/products/ProductsRepo.js-src/api/repo.js", "source": "src/api/products/ProductsRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/products/ProductsRepo.js-src/api/products/ProductsLocal.js", "source": "src/api/products/ProductsRepo.js", "target": "src/api/products/ProductsLocal.js", "imports": "ProductsLocal"}}, {"data": {"id": "src/api/products/ProductsRepo.js-src/api/products/ProductsRemote.js", "source": "src/api/products/ProductsRepo.js", "target": "src/api/products/ProductsRemote.js", "imports": "ProductsRemote"}}, {"data": {"id": "src/api/products/ProductsLocal.js-src/api/LocalRepo.js", "source": "src/api/products/ProductsLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/products/ProductsRemote.js-src/api/http.js", "source": "src/api/products/ProductsRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/brands/BrandsRemote.js-src/api/http.js", "source": "src/api/brands/BrandsRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/brands/BrandsLocal.js-src/api/LocalRepo.js", "source": "src/api/brands/BrandsLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/brands/BrandsRepo.js-src/api/brands/BrandsLocal.js", "source": "src/api/brands/BrandsRepo.js", "target": "src/api/brands/BrandsLocal.js", "imports": "BrandsLocal"}}, {"data": {"id": "src/api/brands/BrandsRepo.js-src/api/brands/BrandsRemote.js", "source": "src/api/brands/BrandsRepo.js", "target": "src/api/brands/BrandsRemote.js", "imports": "BrandsRemote"}}, {"data": {"id": "src/api/brands/BrandsRepo.js-src/api/repo.js", "source": "src/api/brands/BrandsRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/articles/ArticlesLocal.js-src/api/LocalRepo.js", "source": "src/api/articles/ArticlesLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js-src/api/articles/ArticlesLocal.js", "source": "src/api/articles/ArticlesRepo.js", "target": "src/api/articles/ArticlesLocal.js", "imports": "ArticlesLocal"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js-src/api/articles/ArticlesRemote.js", "source": "src/api/articles/ArticlesRepo.js", "target": "src/api/articles/ArticlesRemote.js", "imports": "ArticlesRemote"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js-src/api/repo.js", "source": "src/api/articles/ArticlesRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/articles/ArticlesRemote.js-src/api/http.js", "source": "src/api/articles/ArticlesRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/messaging/fb.js-src/const/globals.js", "source": "src/api/messaging/fb.js", "target": "src/const/globals.js", "imports": "fireb as eConfig"}}, {"data": {"id": "src/api/categories/CategoriesRemote.js-src/api/RemoteRepo.js", "source": "src/api/categories/CategoriesRemote.js", "target": "src/api/RemoteRepo.js", "imports": "RemoteRepo"}}, {"data": {"id": "src/api/categories/CategoriesLocal.js-src/api/LocalRepo.js", "source": "src/api/categories/CategoriesLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js-src/api/categories/CategoriesRemote.js", "source": "src/api/categories/CategoriesRepo.js", "target": "src/api/categories/CategoriesRemote.js", "imports": "CategoriesRemote"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js-src/api/categories/CategoriesLocal.js", "source": "src/api/categories/CategoriesRepo.js", "target": "src/api/categories/CategoriesLocal.js", "imports": "CategoriesLocal"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js-src/api/repo.js", "source": "src/api/categories/CategoriesRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/rfid/RFIDRemote.js-src/api/http.js", "source": "src/api/rfid/RFIDRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js-src/api/repo.js", "source": "src/api/rfid/RFIDRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js-src/api/rfid/RFIDLocal.js", "source": "src/api/rfid/RFIDRepo.js", "target": "src/api/rfid/RFIDLocal.js", "imports": "RFIDLocal"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js-src/api/rfid/RFIDRemote.js", "source": "src/api/rfid/RFIDRepo.js", "target": "src/api/rfid/RFIDRemote.js", "imports": "RFIDRemote"}}, {"data": {"id": "src/api/rfid/RFIDLocal.js-src/api/LocalRepo.js", "source": "src/api/rfid/RFIDLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/analytics/events.js-src/analytics/db.js", "source": "src/analytics/events.js", "target": "src/analytics/db.js", "imports": "default as DB"}}];
    
    // Subgraphs data - will be replaced by Python
    var subgraphsData = {"subgraph_0": {"name": "static", "elements": [{"data": {"id": "static/js/upload.js", "label": "upload.js", "fullPath": "static/js/upload.js", "type": "javascript"}}, {"data": {"id": "static/js/jquery.onScreenKeynumber.js", "label": "jquery.onScreenKeynumber.js", "fullPath": "static/js/jquery.onScreenKeynumber.js", "type": "javascript"}}, {"data": {"id": "static/js/sw-cache-sync.js", "label": "sw-cache-sync.js", "fullPath": "static/js/sw-cache-sync.js", "type": "javascript"}}, {"data": {"id": "static/js/jquery.onScreenKeyboard.js", "label": "jquery.onScreenKeyboard.js", "fullPath": "static/js/jquery.onScreenKeyboard.js", "type": "javascript"}}, {"data": {"id": "static/js/config.js", "label": "config.js", "fullPath": "static/js/config.js", "type": "javascript"}}, {"data": {"id": "static/js/firebase-messaging-sw.js", "label": "firebase-messaging-sw.js", "fullPath": "static/js/firebase-messaging-sw.js", "type": "javascript"}}]}, "subgraph_1": {"name": "functions", "elements": [{"data": {"id": "functions/index.js", "label": "index.js", "fullPath": "functions/index.js", "type": "javascript"}}, {"data": {"id": "functions/config.js", "label": "config.js", "fullPath": "functions/config.js", "type": "javascript"}}, {"data": {"id": "functions/.eslintrc.js", "label": ".eslintrc.js", "fullPath": "functions/.eslintrc.js", "type": "javascript"}}]}, "subgraph_2": {"name": "src", "elements": [{"data": {"id": "src/main.js", "label": "main.js", "fullPath": "src/main.js", "type": "javascript"}}, {"data": {"id": "src/const/globals.js", "label": "globals.js", "fullPath": "src/const/globals.js", "type": "javascript"}}, {"data": {"id": "src/store/store.js", "label": "store.js", "fullPath": "src/store/store.js", "type": "javascript"}}, {"data": {"id": "src/analytics/analytics.js", "label": "analytics.js", "fullPath": "src/analytics/analytics.js", "type": "javascript"}}, {"data": {"id": "src/store/modules/cart.js", "label": "cart.js", "fullPath": "src/store/modules/cart.js", "type": "javascript"}}, {"data": {"id": "src/mixins/aeropayEvent.js", "label": "aeropayEvent.js", "fullPath": "src/mixins/aeropayEvent.js", "type": "javascript"}}, {"data": {"id": "src/api/messaging/index.js", "label": "index.js", "fullPath": "src/api/messaging/index.js", "type": "javascript"}}, {"data": {"id": "src/mixins/offlineMixin.js", "label": "offlineMixin.js", "fullPath": "src/mixins/offlineMixin.js", "type": "javascript"}}, {"data": {"id": "src/mixins/keyboardEvents.js", "label": "keyboardEvents.js", "fullPath": "src/mixins/keyboardEvents.js", "type": "javascript"}}, {"data": {"id": "src/mixins/redirectEvent.js", "label": "redirectEvent.js", "fullPath": "src/mixins/redirectEvent.js", "type": "javascript"}}, {"data": {"id": "src/mixins/HasProductsPaginated.js", "label": "HasProductsPaginated.js", "fullPath": "src/mixins/HasProductsPaginated.js", "type": "javascript"}}, {"data": {"id": "src/mixins/HasShopify.js", "label": "HasShopify.js", "fullPath": "src/mixins/HasShopify.js", "type": "javascript"}}, {"data": {"id": "src/mixins/isCardWithAttributes.js", "label": "isCardWithAttributes.js", "fullPath": "src/mixins/isCardWithAttributes.js", "type": "javascript"}}, {"data": {"id": "src/mixins/MergeConfig.js", "label": "MergeConfig.js", "fullPath": "src/mixins/MergeConfig.js", "type": "javascript"}}, {"data": {"id": "src/plugins/config.js", "label": "config.js", "fullPath": "src/plugins/config.js", "type": "javascript"}}, {"data": {"id": "src/api/LocalRepo.js", "label": "LocalRepo.js", "fullPath": "src/api/LocalRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/dbconfig.js", "label": "dbconfig.js", "fullPath": "src/api/dbconfig.js", "type": "javascript"}}, {"data": {"id": "src/api/db.js", "label": "db.js", "fullPath": "src/api/db.js", "type": "javascript"}}, {"data": {"id": "src/api/urls.js", "label": "urls.js", "fullPath": "src/api/urls.js", "type": "javascript"}}, {"data": {"id": "src/api/RemoteRepo.js", "label": "RemoteRepo.js", "fullPath": "src/api/RemoteRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/http.js", "label": "http.js", "fullPath": "src/api/http.js", "type": "javascript"}}, {"data": {"id": "src/api/api.js", "label": "api.js", "fullPath": "src/api/api.js", "type": "javascript"}}, {"data": {"id": "src/api/repo.js", "label": "repo.js", "fullPath": "src/api/repo.js", "type": "javascript"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js", "label": "FeatureTagsRepo.js", "fullPath": "src/api/feature-tags/FeatureTagsRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsLocal.js", "label": "FeatureTagsLocal.js", "fullPath": "src/api/feature-tags/FeatureTagsLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRemote.js", "label": "FeatureTagsRemote.js", "fullPath": "src/api/feature-tags/FeatureTagsRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/products/ProductsRepo.js", "label": "ProductsRepo.js", "fullPath": "src/api/products/ProductsRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/products/ProductsLocal.js", "label": "ProductsLocal.js", "fullPath": "src/api/products/ProductsLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/products/ProductsRemote.js", "label": "ProductsRemote.js", "fullPath": "src/api/products/ProductsRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/brands/BrandsRemote.js", "label": "BrandsRemote.js", "fullPath": "src/api/brands/BrandsRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/brands/BrandsLocal.js", "label": "BrandsLocal.js", "fullPath": "src/api/brands/BrandsLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/brands/BrandsRepo.js", "label": "BrandsRepo.js", "fullPath": "src/api/brands/BrandsRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/articles/ArticlesLocal.js", "label": "ArticlesLocal.js", "fullPath": "src/api/articles/ArticlesLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js", "label": "ArticlesRepo.js", "fullPath": "src/api/articles/ArticlesRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/articles/ArticlesRemote.js", "label": "ArticlesRemote.js", "fullPath": "src/api/articles/ArticlesRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/messaging/fb.js", "label": "fb.js", "fullPath": "src/api/messaging/fb.js", "type": "javascript"}}, {"data": {"id": "src/api/categories/CategoriesRemote.js", "label": "CategoriesRemote.js", "fullPath": "src/api/categories/CategoriesRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/categories/CategoriesLocal.js", "label": "CategoriesLocal.js", "fullPath": "src/api/categories/CategoriesLocal.js", "type": "javascript"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js", "label": "CategoriesRepo.js", "fullPath": "src/api/categories/CategoriesRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/rfid/RFIDRemote.js", "label": "RFIDRemote.js", "fullPath": "src/api/rfid/RFIDRemote.js", "type": "javascript"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js", "label": "RFIDRepo.js", "fullPath": "src/api/rfid/RFIDRepo.js", "type": "javascript"}}, {"data": {"id": "src/api/rfid/RFIDLocal.js", "label": "RFIDLocal.js", "fullPath": "src/api/rfid/RFIDLocal.js", "type": "javascript"}}, {"data": {"id": "src/assets/js/GSDevTools3.min.js", "label": "GSDevTools3.min.js", "fullPath": "src/assets/js/GSDevTools3.min.js", "type": "javascript"}}, {"data": {"id": "src/assets/js/utils.js", "label": "utils.js", "fullPath": "src/assets/js/utils.js", "type": "javascript"}}, {"data": {"id": "src/analytics/events.js", "label": "events.js", "fullPath": "src/analytics/events.js", "type": "javascript"}}, {"data": {"id": "src/analytics/db.js", "label": "db.js", "fullPath": "src/analytics/db.js", "type": "javascript"}}, {"data": {"id": "src/analytics/EventsAPI.js", "label": "EventsAPI.js", "fullPath": "src/analytics/EventsAPI.js", "type": "javascript"}}, {"data": {"id": "src/analytics/example.js", "label": "example.js", "fullPath": "src/analytics/example.js", "type": "javascript"}}, {"data": {"id": "src/store/modules/products.js", "label": "products.js", "fullPath": "src/store/modules/products.js", "type": "javascript"}}, {"data": {"id": "src/router/index.js", "label": "index.js", "fullPath": "src/router/index.js", "type": "javascript"}}, {"data": {"id": "src/main.js-src/const/globals.js", "source": "src/main.js", "target": "src/const/globals.js", "imports": "SETTINGS_TIME"}}, {"data": {"id": "src/main.js-src/store/store.js", "source": "src/main.js", "target": "src/store/store.js", "imports": "default as vuexStore"}}, {"data": {"id": "src/main.js-src/analytics/analytics.js", "source": "src/main.js", "target": "src/analytics/analytics.js", "imports": "default as Analytics"}}, {"data": {"id": "src/main.js-src/store/modules/cart.js", "source": "src/main.js", "target": "src/store/modules/cart.js", "imports": "default as cart"}}, {"data": {"id": "src/store/store.js-src/store/modules/products.js", "source": "src/store/store.js", "target": "src/store/modules/products.js", "imports": "default as products"}}, {"data": {"id": "src/store/store.js-src/store/modules/cart.js", "source": "src/store/store.js", "target": "src/store/modules/cart.js", "imports": "default as cart"}}, {"data": {"id": "src/analytics/analytics.js-src/analytics/events.js", "source": "src/analytics/analytics.js", "target": "src/analytics/events.js", "imports": "default as Events"}}, {"data": {"id": "src/analytics/analytics.js-src/analytics/EventsAPI.js", "source": "src/analytics/analytics.js", "target": "src/analytics/EventsAPI.js", "imports": "default as EventsAPI"}}, {"data": {"id": "src/mixins/aeropayEvent.js-src/const/globals.js", "source": "src/mixins/aeropayEvent.js", "target": "src/const/globals.js", "imports": "fireb as eConfig"}}, {"data": {"id": "src/mixins/aeropayEvent.js-src/api/messaging/index.js", "source": "src/mixins/aeropayEvent.js", "target": "src/api/messaging/index.js", "imports": "getAeropayOrderChanges"}}, {"data": {"id": "src/api/messaging/index.js-src/const/globals.js", "source": "src/api/messaging/index.js", "target": "src/const/globals.js", "imports": "SERVER_KEY, VAPID_KEY"}}, {"data": {"id": "src/api/messaging/index.js-src/api/messaging/fb.js", "source": "src/api/messaging/index.js", "target": "src/api/messaging/fb.js", "imports": "fbMessaging, fireb as eDB"}}, {"data": {"id": "src/plugins/config.js-src/const/globals.js", "source": "src/plugins/config.js", "target": "src/const/globals.js", "imports": "API_ENVIROMENTS"}}, {"data": {"id": "src/api/LocalRepo.js-src/api/dbconfig.js", "source": "src/api/LocalRepo.js", "target": "src/api/dbconfig.js", "imports": "default as DB"}}, {"data": {"id": "src/api/RemoteRepo.js-src/api/http.js", "source": "src/api/RemoteRepo.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/api.js-src/api/urls.js", "source": "src/api/api.js", "target": "src/api/urls.js", "imports": "ORDERS_PREVIEW"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js-src/api/repo.js", "source": "src/api/feature-tags/FeatureTagsRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js-src/api/feature-tags/FeatureTagsLocal.js", "source": "src/api/feature-tags/FeatureTagsRepo.js", "target": "src/api/feature-tags/FeatureTagsLocal.js", "imports": "FeatureTagsLocal"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRepo.js-src/api/feature-tags/FeatureTagsRemote.js", "source": "src/api/feature-tags/FeatureTagsRepo.js", "target": "src/api/feature-tags/FeatureTagsRemote.js", "imports": "FeaturesTagsRemote"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsLocal.js-src/api/LocalRepo.js", "source": "src/api/feature-tags/FeatureTagsLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/feature-tags/FeatureTagsRemote.js-src/api/http.js", "source": "src/api/feature-tags/FeatureTagsRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/products/ProductsRepo.js-src/api/repo.js", "source": "src/api/products/ProductsRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/products/ProductsRepo.js-src/api/products/ProductsLocal.js", "source": "src/api/products/ProductsRepo.js", "target": "src/api/products/ProductsLocal.js", "imports": "ProductsLocal"}}, {"data": {"id": "src/api/products/ProductsRepo.js-src/api/products/ProductsRemote.js", "source": "src/api/products/ProductsRepo.js", "target": "src/api/products/ProductsRemote.js", "imports": "ProductsRemote"}}, {"data": {"id": "src/api/products/ProductsLocal.js-src/api/LocalRepo.js", "source": "src/api/products/ProductsLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/products/ProductsRemote.js-src/api/http.js", "source": "src/api/products/ProductsRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/brands/BrandsRemote.js-src/api/http.js", "source": "src/api/brands/BrandsRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/brands/BrandsLocal.js-src/api/LocalRepo.js", "source": "src/api/brands/BrandsLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/brands/BrandsRepo.js-src/api/brands/BrandsLocal.js", "source": "src/api/brands/BrandsRepo.js", "target": "src/api/brands/BrandsLocal.js", "imports": "BrandsLocal"}}, {"data": {"id": "src/api/brands/BrandsRepo.js-src/api/brands/BrandsRemote.js", "source": "src/api/brands/BrandsRepo.js", "target": "src/api/brands/BrandsRemote.js", "imports": "BrandsRemote"}}, {"data": {"id": "src/api/brands/BrandsRepo.js-src/api/repo.js", "source": "src/api/brands/BrandsRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/articles/ArticlesLocal.js-src/api/LocalRepo.js", "source": "src/api/articles/ArticlesLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js-src/api/articles/ArticlesLocal.js", "source": "src/api/articles/ArticlesRepo.js", "target": "src/api/articles/ArticlesLocal.js", "imports": "ArticlesLocal"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js-src/api/articles/ArticlesRemote.js", "source": "src/api/articles/ArticlesRepo.js", "target": "src/api/articles/ArticlesRemote.js", "imports": "ArticlesRemote"}}, {"data": {"id": "src/api/articles/ArticlesRepo.js-src/api/repo.js", "source": "src/api/articles/ArticlesRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/articles/ArticlesRemote.js-src/api/http.js", "source": "src/api/articles/ArticlesRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/messaging/fb.js-src/const/globals.js", "source": "src/api/messaging/fb.js", "target": "src/const/globals.js", "imports": "fireb as eConfig"}}, {"data": {"id": "src/api/categories/CategoriesRemote.js-src/api/RemoteRepo.js", "source": "src/api/categories/CategoriesRemote.js", "target": "src/api/RemoteRepo.js", "imports": "RemoteRepo"}}, {"data": {"id": "src/api/categories/CategoriesLocal.js-src/api/LocalRepo.js", "source": "src/api/categories/CategoriesLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js-src/api/categories/CategoriesRemote.js", "source": "src/api/categories/CategoriesRepo.js", "target": "src/api/categories/CategoriesRemote.js", "imports": "CategoriesRemote"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js-src/api/categories/CategoriesLocal.js", "source": "src/api/categories/CategoriesRepo.js", "target": "src/api/categories/CategoriesLocal.js", "imports": "CategoriesLocal"}}, {"data": {"id": "src/api/categories/CategoriesRepo.js-src/api/repo.js", "source": "src/api/categories/CategoriesRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/rfid/RFIDRemote.js-src/api/http.js", "source": "src/api/rfid/RFIDRemote.js", "target": "src/api/http.js", "imports": "default as HTTP"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js-src/api/repo.js", "source": "src/api/rfid/RFIDRepo.js", "target": "src/api/repo.js", "imports": "Repo"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js-src/api/rfid/RFIDLocal.js", "source": "src/api/rfid/RFIDRepo.js", "target": "src/api/rfid/RFIDLocal.js", "imports": "RFIDLocal"}}, {"data": {"id": "src/api/rfid/RFIDRepo.js-src/api/rfid/RFIDRemote.js", "source": "src/api/rfid/RFIDRepo.js", "target": "src/api/rfid/RFIDRemote.js", "imports": "RFIDRemote"}}, {"data": {"id": "src/api/rfid/RFIDLocal.js-src/api/LocalRepo.js", "source": "src/api/rfid/RFIDLocal.js", "target": "src/api/LocalRepo.js", "imports": "LocalRepo"}}, {"data": {"id": "src/analytics/events.js-src/analytics/db.js", "source": "src/analytics/events.js", "target": "src/analytics/db.js", "imports": "default as DB"}}]}};
    
    $(document).ready(function() {
        function showStatus(message, isError) {
            $('#status').removeClass('status-error status-success')
                      .addClass(isError ? 'status-error' : 'status-success')
                      .html(message)
                      .show();
            
            // Auto-hide status after 5 seconds if it's a success message
            if (!isError) {
                setTimeout(function() {
                    $('#status').fadeOut();
                }, 5000);
            }
        }
        
        try {
            // Initialize Cytoscape
            var cy = cytoscape({
                container: document.getElementById('cy'),
                style: [
                    {
                        selector: 'node',
                        style: {
                            'label': 'data(label)',
                            'text-valign': 'center',
                            'text-halign': 'center',
                            'background-color': function(ele) {
                                switch(ele.data('type')) {
                                    case 'python': return '#6BAED6';
                                    case 'javascript': return '#74C476';
                                    case 'typescript': return '#EF6548';
                                    default: return '#ddd';
                                }
                            },
                            'color': '#fff',
                            'font-size': '12px',
                            'width': '60px', // Even larger nodes
                            'height': '60px', // Even larger nodes
                            'text-outline-color': '#555',
                            'text-outline-width': '1px'
                        }
                    },
                    {
                        selector: 'edge',
                        style: {
                            'width': 2,
                            'curve-style': 'bezier',
                            'target-arrow-shape': 'triangle',
                            'line-color': '#999',
                            'target-arrow-color': '#999',
                            'opacity': 0.8
                        }
                    },
                    {
                        selector: 'edge[imports]',
                        style: {
                            'label': 'data(imports)',
                            'font-size': '10px',
                            'text-rotation': 'autorotate',
                            'text-background-opacity': 1,
                            'text-background-color': '#fff',
                            'text-background-padding': '2px'
                        }
                    }
                ],
                layout: {
                    name: 'cose',
                    animate: false,
                    nodeDimensionsIncludeLabels: true,
                    idealEdgeLength: 150, // More spread out
                    nodeOverlap: 20, // Prevent overlap
                    refresh: 20,
                    fit: true,
                    padding: 30,
                    randomize: false,
                    componentSpacing: 250, // More separation between components
                    nodeRepulsion: 8000, // Even more node repulsion
                    edgeElasticity: 100,
                    nestingFactor: 1.2,
                    gravity: 80,
                    numIter: 1000,
                    initialTemp: 200,
                    coolingFactor: 0.95,
                    minTemp: 1.0
                }
            });
            
            // Load main graph data directly from JavaScript variable
            $('#loading').show();
            try {
                cy.add(mainGraphData);
                runCoseLayout();
                updateFileList();
                $('#loading').hide();
                showStatus('Graph loaded successfully', false);
            } catch (err) {
                $('#loading').hide();
                showStatus('Error loading graph: ' + err.message, true);
                console.error('Error processing graph data:', err);
            }
            
            // Populate subgraph dropdown using JavaScript variable
            var selector = $('#graphSelector');
            try {
                Object.keys(subgraphsData).forEach(function(key, index) {
                    var subgraph = subgraphsData[key];
                    var nodeCount = subgraph.elements.filter(e => !e.data.source).length;
                    selector.append($('<option>', {
                        value: key,
                        text: subgraph.name + ' (' + nodeCount + ' files)'
                    }));
                });
            } catch (err) {
                showStatus('Error loading subgraphs: ' + err.message, true);
                console.error('Error processing subgraph data:', err);
            }
            
            // Graph selector change event
            $('#graphSelector').change(function() {
                var selectedValue = $(this).val();
                $('#loading').show();
                
                if (selectedValue === 'main') {
                    // Load main graph
                    cy.elements().remove();
                    try {
                        cy.add(mainGraphData);
                        runCoseLayout();
                        updateFileList();
                        $('#loading').hide();
                    } catch (err) {
                        $('#loading').hide();
                        showStatus('Error loading main graph: ' + err.message, true);
                    }
                } else {
                    // Load selected subgraph
                    try {
                        var subgraphData = subgraphsData[selectedValue];
                        cy.elements().remove();
                        cy.add(subgraphData.elements);
                        runCoseLayout();
                        updateFileList();
                        $('#loading').hide();
                    } catch (err) {
                        $('#loading').hide();
                        showStatus('Error loading subgraph: ' + err.message, true);
                    }
                }
            });
            
            // Node click event
            cy.on('tap', 'node', function(evt) {
                var node = evt.target;
                $('#infoPanel').html(
                    '<strong>File:</strong> ' + node.data('fullPath') + '<br>' +
                    '<strong>Type:</strong> ' + node.data('type').charAt(0).toUpperCase() + node.data('type').slice(1) + '<br>' +
                    '<div class="node-details">' +
                    '<strong>Connections:</strong> ' + node.degree() + ' (' + 
                    node.indegree() + ' in, ' + node.outdegree() + ' out)</div>'
                ).show();
            });
            
            // Background click - hide info panel
            cy.on('tap', function(evt) {
                if (evt.target === cy) {
                    $('#infoPanel').hide();
                }
            });
            
            // Helper function for COSE layout
            function runCoseLayout() {
                cy.layout({
                    name: 'cose',
                    animate: false,
                    nodeDimensionsIncludeLabels: true,
                    idealEdgeLength: 150,
                    nodeOverlap: 20,
                    componentSpacing: 250,
                    nodeRepulsion: 8000,
                    edgeElasticity: 100,
                    nestingFactor: 1.2,
                    gravity: 80,
                    numIter: 1000
                }).run();
                cy.fit();
            }
            
            // Control buttons
            $('#fitBtn').click(function() {
                cy.fit();
            });
            
            $('#randomLayoutBtn').click(function() {
                $('#loading').show();
                try {
                    cy.layout({
                        name: 'random', 
                        animate: false,
                        padding: 50
                    }).run();
                    cy.fit();
                    $('#loading').hide();
                } catch (err) {
                    $('#loading').hide();
                    showStatus('Error applying layout: ' + err.message, true);
                }
            });
            
            $('#gridLayoutBtn').click(function() {
                $('#loading').show();
                try {
                    cy.layout({
                        name: 'grid', 
                        animate: false,
                        padding: 50
                    }).run();
                    cy.fit();
                    $('#loading').hide();
                } catch (err) {
                    $('#loading').hide();
                    showStatus('Error applying layout: ' + err.message, true);
                }
            });
            
            $('#concLayoutBtn').click(function() {
                $('#loading').show();
                try {
                    cy.layout({
                        name: 'concentric', 
                        animate: false,
                        minNodeSpacing: 80, // More space between nodes
                        concentric: function(node) {
                            // Place nodes with more connections in the center
                            return node.degree();
                        },
                        levelWidth: function() { return 2; },
                        padding: 50
                    }).run();
                    cy.fit();
                    $('#loading').hide();
                } catch (err) {
                    $('#loading').hide();
                    showStatus('Error applying layout: ' + err.message, true);
                }
            });
            
            $('#spreadLayoutBtn').click(function() {
                $('#loading').show();
                try {
                    cy.layout({
                        name: 'spread',
                        animate: false,
                        minDist: 100, // Increased minimum distance between nodes
                        padding: 50,
                        expandingFactor: -1 // Negative is more spread out
                    }).run();
                    cy.fit();
                    $('#loading').hide();
                } catch (err) {
                    $('#loading').hide();
                    showStatus('Error applying layout: ' + err.message, true);
                }
            });
            
            $('#coseLayoutBtn').click(function() {
                $('#loading').show();
                try {
                    runCoseLayout();
                    $('#loading').hide();
                } catch (err) {
                    $('#loading').hide();
                    showStatus('Error applying layout: ' + err.message, true);
                }
            });
            
            // Update file list
            function updateFileList() {
                var fileList = $('#fileList');
                fileList.empty();
                
                cy.nodes().sort(function(a, b) {
                    return a.data('fullPath').localeCompare(b.data('fullPath'));
                }).forEach(function(node) {
                    fileList.append('<li>' + node.data('fullPath') + '</li>');
                });
            }
        } catch (err) {
            $('#loading').hide();
            showStatus('Critical error initializing graph: ' + err.message, true);
            console.error('Critical error:', err);
        }
    });
    </script>
</body>
</html>